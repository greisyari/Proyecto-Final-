<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tu Carrito de Compras</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/stly.css">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .container {
            max-width: 800px;
        }
        .carrito-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #dee2e6;
        }
        .carrito-item:last-child {
            border-bottom: none;
        }
        .carrito-total {
            text-align: right;
            font-size: 1.5rem;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">𝐂𝐀𝐋𝐙𝐀𝐃𝐎 𝐃𝐄 𝐄𝐍𝐒𝐔𝐄ñ𝐎</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="carrito.html">Carrito</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Contacto</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <main class="container my-5">
        <h1 class="text-center mb-4">Tu Carrito de Compras</h1>
        <div id="lista-carrito" class="bg-white p-4 rounded shadow-sm">
            </div>
        <div class="d-flex justify-content-end mt-4">
            <h2 class="carrito-total">Total: $<span id="total-carrito">0.00</span></h2>
        </div>
            </div>
                <form action="/procesar-compra" method="POST">
                  <h2>Procesar compra</h2>
                    <div class="form-group">
                        <label for="size">Talla:</label>
                        <select id="size" name="size" required>
                            <option value="">Selecciona tu talla</option>
                            <option value="36">36</option>
                            <option value="37">37</option>
                            <option value="38">38</option>
                            <option value="39">39</option>
                            <option value="40">40</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="color">Color:</label>
                        <select id="color" name="color" required>
                            <option value="">Selecciona un color</option>
                              <option value="azul">Azul</option>
                            <option value="rojo">Rojo</option>
                             <option value="negro">Negro</option>
                            <option value="blanco">Blanco</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="quantity">Cantidad:</label>
                        <input
                            type="number"
                            id="quantity"
                            name="quantity"
                            min="1"
                     
                          
                        
                    </div>
           
        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-3">
            <button class="btn btn-success btn-lg" onclick="finalizarCompra()">Finalizar Compra</button>
        </div>
    </main>

    <footer class="bg-dark text-white text-center p-3 mt-5">
        <p>&copy; 2025 Todos los derechos reservados.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            cargarCarrito();
        });

        function cargarCarrito() {
            const listaCarrito = document.getElementById('lista-carrito');
            const totalElemento = document.getElementById('total-carrito');
            const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            
            listaCarrito.innerHTML = '';
            let total = 0;

            if (carrito.length === 0) {
                listaCarrito.innerHTML = '<p class="text-center text-muted">Tu carrito está vacío.</p>';
                totalElemento.textContent = '0.00';
                return;
            }

            carrito.forEach((producto, index) => {
                const item = document.createElement('div');
                item.className = 'carrito-item';
                item.innerHTML = `
                    <span>${producto.nombre} - Talla: ${producto.talla}</span>
                    <span>$${producto.precio.toFixed(2)}</span>
                    <button class="btn btn-danger btn-sm" onclick="eliminarDelCarrito(${index})">Eliminar</button>
                `;
                listaCarrito.appendChild(item);
                total += producto.precio;
            });

            totalElemento.textContent = total.toFixed(2);
        }

        function eliminarDelCarrito(index) {
            let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            carrito.splice(index, 1);
            localStorage.setItem('carrito', JSON.stringify(carrito));
            cargarCarrito(); // Recarga el carrito para mostrar los cambios
        }

        function finalizarCompra() {
            alert('¡Gracias por tu compra! Tu pedido está en proceso.');
            localStorage.removeItem('carrito');
            cargarCarrito();
        }
    </script>
</body>
</html>